# é¡¹ç›®ç»“æ„è¯´æ˜

æœ¬æ–‡æ¡£æè¿°äº† React Markdown ç»„ä»¶åº“çš„ç›®å½•ç»“æ„å’Œæ–‡ä»¶ç»„ç»‡æ–¹å¼ã€‚

## ğŸ“ ç›®å½•ç»“æ„

```
react-markdown/
â”œâ”€â”€ .storybook/              # Storybook é…ç½®
â”‚   â”œâ”€â”€ main.ts             # ä¸»é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ preview.ts          # é¢„è§ˆé…ç½®
â”œâ”€â”€ dist/                   # æ„å»ºè¾“å‡ºç›®å½•
â”œâ”€â”€ scripts/                # æ„å»ºå’Œå·¥å…·è„šæœ¬
â”‚   â”œâ”€â”€ clean-css-imports.js
â”‚   â”œâ”€â”€ diagnose-react19-issue.js
â”‚   â””â”€â”€ generate-react19-config.js
â”œâ”€â”€ src/                    # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ __tests__/          # æµ‹è¯•ç›¸å…³æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ index.ts        # æµ‹è¯•å·¥å…·å¯¼å‡º
â”‚   â”‚   â”œâ”€â”€ mocks.ts        # æ¨¡æ‹Ÿæ•°æ®
â”‚   â”‚   â””â”€â”€ test-utils.ts   # æµ‹è¯•å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ components/         # ç»„ä»¶ç›®å½•
â”‚   â”‚   â”œâ”€â”€ index.ts        # ç»„ä»¶ç»Ÿä¸€å¯¼å‡º
â”‚   â”‚   â””â”€â”€ markdown-renderer/  # Markdown æ¸²æŸ“å™¨ç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ hooks/      # è‡ªå®šä¹‰ Hooks
â”‚   â”‚       â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ useMarkdownComponents.tsx
â”‚   â”‚       â”‚   â”œâ”€â”€ useMarkdownPlugins.ts
â”‚   â”‚       â”‚   â”œâ”€â”€ useMarkdownStyles.ts
â”‚   â”‚       â”‚   â””â”€â”€ useProcessedContent.ts
â”‚   â”‚       â”œâ”€â”€ index.module.less  # æ ·å¼æ–‡ä»¶
â”‚   â”‚       â”œâ”€â”€ index.tsx   # ä¸»ç»„ä»¶æ–‡ä»¶
â”‚   â”‚       â”œâ”€â”€ README.md   # ç»„ä»¶æ–‡æ¡£
â”‚   â”‚       â””â”€â”€ types.ts    # ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ examples/           # ç¤ºä¾‹é…ç½®å’Œå†…å®¹
â”‚   â”‚   â”œâ”€â”€ index.ts        # ç¤ºä¾‹å¯¼å‡º
â”‚   â”‚   â”œâ”€â”€ content.ts      # ç¤ºä¾‹å†…å®¹
â”‚   â”‚   â””â”€â”€ themes.ts       # ä¸»é¢˜é…ç½®
â”‚   â”œâ”€â”€ stories/            # Storybook æ•…äº‹
â”‚   â”‚   â””â”€â”€ MarkdownRenderer.stories.tsx
â”‚   â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ index.ts        # å·¥å…·å‡½æ•°å¯¼å‡º
â”‚   â”œâ”€â”€ index.ts            # ä¸»å…¥å£æ–‡ä»¶
â”‚   â””â”€â”€ vite-env.d.ts       # Vite ç±»å‹å£°æ˜
â”œâ”€â”€ .gitignore              # Git å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ .npmignore              # NPM å‘å¸ƒå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ CHANGELOG.md            # å˜æ›´æ—¥å¿—
â”œâ”€â”€ package.json            # é¡¹ç›®é…ç½®
â”œâ”€â”€ README.md               # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ tsconfig.build.json     # æ„å»º TypeScript é…ç½®
â”œâ”€â”€ tsconfig.json           # TypeScript é…ç½®
â””â”€â”€ vite.config.ts          # Vite é…ç½®
```

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### æ ¸å¿ƒç»„ä»¶
- **MarkdownRenderer**: ä¸»æ¸²æŸ“ç»„ä»¶ï¼Œè´Ÿè´£æ•´åˆæ‰€æœ‰åŠŸèƒ½
- **Hooks**: åŠŸèƒ½æ¨¡å—åŒ–çš„è‡ªå®šä¹‰ Hook é›†åˆ
- **Types**: å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰

### åŠŸèƒ½æ¨¡å—
1. **å†…å®¹å¤„ç†** (`useProcessedContent`): LaTeX é¢„å¤„ç†ã€HTML æ¸…ç†
2. **æ ·å¼ç®¡ç†** (`useMarkdownStyles`): åŠ¨æ€æ ·å¼ç”Ÿæˆå’Œä¸»é¢˜æ”¯æŒ
3. **æ’ä»¶ç³»ç»Ÿ** (`useMarkdownPlugins`): Remark/Rehype æ’ä»¶ç®¡ç†
4. **ç»„ä»¶é…ç½®** (`useMarkdownComponents`): è‡ªå®šä¹‰ç»„ä»¶æ¸²æŸ“

### å·¥å…·å‡½æ•°
- **preprocessLaTeX**: LaTeX è¯­æ³•é¢„å¤„ç†
- **replaceThinkToSection**: æ€è€ƒæ¨¡å—æ ‡ç­¾è½¬æ¢

## ğŸ“¦ æ„å»ºå’Œå‘å¸ƒ

### æ„å»ºé…ç½®
- ä½¿ç”¨ Vite ä½œä¸ºæ„å»ºå·¥å…·
- æ”¯æŒ ES Module å’Œ UMD æ ¼å¼è¾“å‡º
- CSS æ¨¡å—å’Œæ ·å¼æ³¨å…¥æ”¯æŒ
- TypeScript å£°æ˜æ–‡ä»¶ç”Ÿæˆ

### å‘å¸ƒé…ç½®
- ä¸»å…¥å£: `dist/react-markdown.umd.js`
- ES æ¨¡å—: `dist/react-markdown.es.js`
- ç±»å‹å£°æ˜: `dist/index.d.ts`
- åªå‘å¸ƒ `dist` ç›®å½•å†…å®¹

## ğŸ§ª æµ‹è¯•å’Œå¼€å‘

### Storybook
- å®Œæ•´çš„ç»„ä»¶ç¤ºä¾‹å’Œæ–‡æ¡£
- å¤šç§ä¸»é¢˜æ ·å¼å±•ç¤º
- äº¤äº’å¼å±æ€§é…ç½®

### å¼€å‘å·¥å…·
- ESLint ä»£ç æ£€æŸ¥
- TypeScript ç±»å‹æ£€æŸ¥
- Vite çƒ­é‡è½½å¼€å‘æœåŠ¡å™¨

## ğŸ“š æ–‡æ¡£å’Œç¤ºä¾‹

### å†…ç½®ç¤ºä¾‹
- **åŸºç¡€åŠŸèƒ½**: åŸºæœ¬ Markdown è¯­æ³•
- **ä»£ç é«˜äº®**: å¤šè¯­è¨€è¯­æ³•é«˜äº®
- **æ•°å­¦å…¬å¼**: KaTeX æ•°å­¦å…¬å¼æ¸²æŸ“
- **ä¸»é¢˜æ ·å¼**: å¤šç§é¢„è®¾ä¸»é¢˜
- **å¤æ‚ç¤ºä¾‹**: ç»¼åˆåŠŸèƒ½å±•ç¤º

### ä¸»é¢˜é…ç½®
- **æ·±è‰²ä¸»é¢˜**: é€‚åˆæš—è‰²ç•Œé¢
- **å­¦æœ¯é£æ ¼**: é€‚åˆè®ºæ–‡å’Œæ–‡æ¡£
- **ç°ä»£ç®€çº¦**: ç®€æ´çš„ç°ä»£è®¾è®¡

## ğŸ”§ æ‰©å±•æ€§

### è‡ªå®šä¹‰ä¸»é¢˜
é€šè¿‡ `styleConfig` å±æ€§å¯ä»¥å®Œå…¨è‡ªå®šä¹‰ç»„ä»¶æ ·å¼ï¼ŒåŒ…æ‹¬ï¼š
- å®¹å™¨æ ·å¼
- æ ‡é¢˜æ ·å¼ (h1-h6)
- ä»£ç å—æ ·å¼
- è¡Œå†…ä»£ç æ ·å¼
- å¼•ç”¨å—æ ·å¼

### æ’ä»¶ç³»ç»Ÿ
æ”¯æŒæ ‡å‡†çš„ Remark å’Œ Rehype æ’ä»¶ï¼Œå¯ä»¥æ‰©å±• Markdown å¤„ç†èƒ½åŠ›ã€‚

### ç»„ä»¶æ›¿æ¢
å¯ä»¥é€šè¿‡è‡ªå®šä¹‰ç»„ä»¶æ›¿æ¢é»˜è®¤çš„æ¸²æŸ“ç»„ä»¶ï¼Œå®ç°ä¸ªæ€§åŒ–çš„å†…å®¹å±•ç¤ºã€‚ 